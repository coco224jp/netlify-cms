---
title: テスト投稿ページです
---
# 2020.4月 ビデオ会議ソフト事情まとめ

> 最終更新: 2020.4.8

<br>

随時追加していきます

## http ⇒ https

```bash
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R,L] 
```

<br>


## 下層フォルダを指定してBasic認証をかける
serviceページとcontactページにのみBasic認証をかける場合の例

```bash
Satisfy Any

AuthType Basic
AuthName "Input your ID and Password."
AuthUserFile /path/to/.htpasswd
require valid-user

SetEnvIf Request_URI "^/(service|contact)/" dir_auth
Order Allow,Deny
Allow from all
Deny from env=dir_auth
```

<br>

## ユーザエージェントに応じてアクセスするディレクトリを分岐

```
[DOCUMENT_ROOT]
 |__ pc
 |__ sp
```
上記のようなディレクトリ構成で、PCの場合は pc、SPの場合はspをルートにする場合

```bash
RewriteCond %{REQUEST_URI} ^/(pc|sp)/
RewriteRule .* - [L]

#SP
RewriteCond %{HTTP_USER_AGENT} (iPod|iPhone|iPad|Android|Windows\ Phone)
RewriteRule  ^(.*)$ sp/$1  [L,NS]

#PC
RewriteBase /
RewriteRule  ^(.*)$ pc/$1  [L,NS]
```

<br>

## ユーザエージェントに応じてアクセスするディレクトリを分岐した上で、共通のWordPressフォルダを使用

```
[DOCUMENT_ROOT]
 |__ _wordpress
 |__ pc
 |__ sp
```
上記のようなディレクトリ構成で、PCの場合は pc、SPの場合はspをルートにした上で、共通の_wordpressフォルダを使用

```bash
RewriteCond %{REQUEST_URI} ^/(pc|sp)/
RewriteRule .* - [L]

#SP
RewriteCond %{HTTP_USER_AGENT} (iPod|iPhone|iPad|Android|Windows\ Phone)
RewriteCond %{REQUEST_URI} !(^/_wordpress/)
RewriteRule  ^(.*)$ sp/$1  [L,NS]

#PC
RewriteBase /
RewriteCond %{REQUEST_URI} !(^/_wordpress/)
RewriteRule  ^(.*)$ pc/$1  [L,NS]
```

<br>

## サーバーキャッシュOff
```bash
<Files ~ "\.(html|css|php|gif|jpe?g|png|ico|otf|ttf|eot|woff)$">
    Header set Pragma no-cache
    Header set Cache-Control no-cache
</Files>
```

<br>


## サーバーキャッシュOn
> html, css, js　⇒１日  
> 画像やフォント等　⇒　30日  

の有効期限を設ける場合
```bash
<Files ~ ".(html|css|js)$">
	Header set Cache-Control "max-age=86400, public"
</Files>
<Files ~ ".(gif|jpe?g|png|ico|otf|ttf|eot|woff)$">
	Header set Cache-Control "max-age=2592000, public"
</Files>
```

※ Xサーバー(nginx)の場合は、直接編集せず、コンパネから設定してください

<br>

## CPIサーバー (https://www.cpi.ad.jp/) でリライト処理を行う場合

WordPressの設定等、リライト処理の前に
```bash
Options +SymLinksIfOwnerMatch
```
を記述する
